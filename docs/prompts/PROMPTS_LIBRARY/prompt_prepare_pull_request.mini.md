# חובה  קובץ זה חלק משיטת Docs as System mini  
# חובה  אין לערוך קובץ זה בתוך פרויקט פעיל  
# חובה  שינוי בקובץ זה יתבצע רק בעדכון רשמי של השיטה

# הכנת בקשת משיכה

מטרה  
לבנות בקשת משיכה מסודרת ומדויקת  
המבוססת על מסמכי הפרויקט  
על הרשומה האחרונה בלוג  
ועל תוצאות המשימה שהסתיימה  
ולבצע פתיחת PR באמצעות הסקריפט הרשמי OPEN_PULL_REQUEST.sh

קבצים רלוונטיים  
docs/logs/IMPLEMENTATION_LOG.mini.md  
docs/project/IMPLEMENTATION_PLAN.mini.md  
docs/project/PROJECT_SPEC.mini.md  
docs/architecture/ARCHITECTURE_BLUEPRINT.mini.md  
docs/agent/AGENT_CONFIG.mini.yaml  
docs/automation/OPEN_PULL_REQUEST.sh  

## הוראות  

קרא את הרשומה האחרונה בלוג  
docs/logs/IMPLEMENTATION_LOG.mini.md  

זהה מתוך הרשומה  
● שם השלב  
● שם המשימה  
● מטרת המשימה  
● תקציר של מה בוצע  
● קבצים מרכזיים ששונו  
● מצב הבדיקות  

בדוק שאין שינוי שאינו חלק מהמשימה  
בדוק שהתוצאה תואמת למסמכי הפרויקט  
בדוק שכל הבדיקות עברו בהצלחה  

## בניית כותרת וגוף הבקשה  

כותרת קצרה  
שלב + משימה  
למשל  
"BuildAPI – AddValidationRules"

גוף בקשה  
כלול בו את המידע הבא  
● תיאור קצר של מטרת המשימה  
● תקציר ברור של מה בוצע  
● קבצים מרכזיים שנערכו  
● איך השינוי תואם את SPEC ואת ה Blueprint  
● תוצאות הבדיקות  
● נקודות חשובות לסוקר האנושי  

אל תוסיף מידע שאינו קיים בלוג או במסמכים  
אל תכלול קוד שהוא לא חלק מהמשימה  

## בדיקות לפני פתיחת בקשה  

קרא את docs/agent/AGENT_CONFIG.mini.yaml  

ודא שהענף הנוכחי אינו נמצא ברשימת  
git.protectedBranches  

ודא שלענף יש upstream  
אם אין upstream  
עצור ובקש הנחיה מאדם  

בדוק שאין בקשת משיכה קיימת עבור הענף  
(הסקריפט OPEN_PULL_REQUEST.sh יבצע בדיקה נוספת)

## שכבת ביצוע פתיחת בקשה  

לאחר שכל התנאים התקיימו  
יש לפתוח PR רק באמצעות הסקריפט הרשמי  

הכן את משתני הסביבה  
PR_TITLE  
PR_BODY  

ביצוע הפעולה  

```bash
PR_TITLE="<short-title>" \
PR_BODY="<pull-request-body>" \
./docs/automation/OPEN_PULL_REQUEST.sh
```

## כללים מחייבים  
אין לפתוח PR ישירות דרך gh  
אין לפתוח PR דרך ממשק GitHub  
אין לבנות כותרת שאינה מבוססת על השלב והמשימה  
אין לבנות גוף PR שאינו מבוסס על הלוג  
אין לבצע PR מענף שמופיע ב protectedBranches  

## תנאי המשך  
הסקריפט הסתיים בהצלחה  
הבקשה נוצרה כ draft  
הכותרת תואמת לשלב ולמשימה  
גוף הבקשה תואם ללוג ולמסמכים  
אין שגיאות מהסקריפט  
הכל מתועד ביומן  

## פלט מצופה  
בקשת משיכה מסודרת  
קצרה וברורה  
מובנית לפי השיטה  
תואמת את הלוג  
תואמת את המסמכים  
ומוכנה לסקירה אנושית  
